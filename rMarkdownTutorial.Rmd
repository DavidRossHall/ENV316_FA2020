---
title: "ENV 316: R Markdown Tutorial "
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Howdy!

We understand that virtual classes may not have been what you had in mind when you signed up for a course titled *Laboratory and Field Methods in Environmental Science*, but it does provide us with a great oppertunity to really dive into what seperates science from a walk in the woods: writting stuff down! As you've probably already heard, the ENV 316 course will make prodigious use of R and RStudio as we explore concepts of environmental chemistry and ecology. Since you're already using R and RStudio for your data analysis and manipulations, we're encouraging you to submit your work in R Markdown. 

The aim of this document is to briefly explain what R Markdown is, why you should use it (hint: it'll make everyone's lives easier), and how to create simple documents for this course. 

## First off, what is R Markdown? 

In a nutshell, R Markdown allows you to analyse your data with R and write your report in the same place (this document writen with R Markdown). This has loads of benefits including increased reproducibility, and streamlined thinking. No more flipping back and forth between code and writing to figure out what's going on.  For example, 

```{r}
# Look at me go mom
x <- 2+2
x
```

What we've done here is write a snippet of R code, ran it, and printed the results. While the above code isn't anything special, we can extend this concept to include any data, figures or plots  

```{r, echo=FALSE, eval = FALSE}
# Quickly converts the CHM135 .csv files into tidyverse compatible format. 
# Not to be evaluate for the main document
library(tidyverse)
airPol <- read_csv("./data/Toronto_60433_2018_Day2to8.csv")

airPol <- airPol %>%
  pivot_longer(cols = NO2:O3, names_to = "pollutant", values_to = "concentration") %>%
  mutate(date = as.POSIXct(as.Date(Date, origin = "1899-12-30"))) %>%
  select(-Date)

write.csv(airPol, "./data/Toronto_60433_2018_Jan2to8.csv", row.names = FALSE)
#ggplot(airPol, Date, NO2

```

```{r, message = FALSE, fig.cap= "Time series of 2018 ambient O~3~ and NO~2~ concentrations (ppb) in downtown Toronto", fig.height=2}
library(tidyverse) 
library(knitr)
airPol <- read_csv("./data/Toronto_60433_2018_Jan2to8.csv",
                   na = "-999")
kable(airPol[1:5, ], caption = "Example table of airborn pullutant levels used for Figure 1.")


ggplot(airPol, aes(date, concentration, colour = pollutant)) +
  geom_line() +
  theme_classic()
```

